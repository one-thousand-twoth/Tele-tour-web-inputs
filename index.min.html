<!doctypehtml><html lang="ru"><meta charset="UTF-8"><meta name="viewport"content="width=device-width,initial-scale=1"><title>Результат игры</title><script src="https://telegram.org/js/telegram-web-app.js"></script><link rel="stylesheet"href="spectre.min.css"><link rel="stylesheet"href="spectre-icons.min.css"><style>body{padding:.75rem;background-color:var(--tg-theme-bg-color,#fff);color:var(--tg-theme-text-color,#000);font-size:14px}.container{max-width:500px;margin:0 auto}.table-info{text-align:center;padding:.5rem;background-color:#f7f8f9;border-radius:.2rem;margin-bottom:.75rem}.table-info h3{margin:0;color:#5755d9;font-size:1.1rem}h4{margin:0 0 .5rem 0;font-size:1rem}.form-group{margin-bottom:.75rem}.player-card{padding:.6rem .75rem;border:1px solid #dadee4;border-radius:.2rem;margin-bottom:.4rem;cursor:pointer;transition:all .2s;display:flex;align-items:center;gap:.5rem}.player-card:hover{background-color:#f7f8f9}.player-card.selected{background-color:var(--tg-theme-button-color,#5755d9);color:var(--tg-theme-button-text-color,#fff);border-color:var(--tg-theme-button-color,#5755d9)}.player-number{font-size:1.2rem;font-weight:700;min-width:2rem}.form-label{font-size:14px}.penalty-section{margin-top:.75rem}h5{margin-bottom:.4rem;font-weight:600;font-size:.95rem}.form-checkbox{display:block;margin-bottom:.4rem;font-size:14px}</style><div class="container"><div class="table-info"><h3 id="tableNumber">Стол —</h3></div><h4>Выберите победителя:</h4><div class="form-group"><div class="player-card"data-player="1"><div class="player-number"id="player1Number">#—</div></div><div class="player-card"data-player="2"><div class="player-number"id="player2Number">#—</div></div><div class="player-card"data-result="draw"><div class="form-label">Ничья</div></div><div class="player-card"data-result="underplayed"><div class="form-label">Недоиграно</div></div></div><div class="penalty-section"><h5>Штрафы</h5><label class="form-checkbox"><input type="checkbox"id="penalty1"> <i class="form-icon"></i> Штраф игроку <span id="penalty1Label">#—</span></label> <label class="form-checkbox"><input type="checkbox"id="penalty2"> <i class="form-icon"></i> Штраф игроку <span id="penalty2Label">#—</span></label></div></div><script>let selectedWinner=null,tg=null,mainButton=null;const params=new URLSearchParams(window.location.search),player1Id=params.get("proto")||"1",player2Id=params.get("anto")||"2",tableNumber=params.get("table")||"1";function selectWinner(e){selectedWinner=e,document.querySelectorAll(".player-card").forEach(e=>{e.classList.remove("selected")}),document.querySelector(`.player-card[data-player="${e}"]`).classList.add("selected"),updateMainButton()}function selectResult(e){selectedWinner=e,document.querySelectorAll(".player-card").forEach(e=>{e.classList.remove("selected")}),document.querySelector(`.player-card[data-result="${e}"]`).classList.add("selected"),updateMainButton()}function updateMainButton(){mainButton&&(selectedWinner?mainButton.enable():mainButton.disable())}window.addEventListener("load",function(){document.getElementById("tableNumber").textContent=`Стол ${tableNumber}`,document.getElementById("player1Number").textContent=`#${player1Id}`,document.getElementById("player2Number").textContent=`#${player2Id}`,document.getElementById("penalty1Label").textContent=`#${player1Id}`,document.getElementById("penalty2Label").textContent=`#${player2Id}`,window.Telegram&&window.Telegram.WebApp?(tg=window.Telegram.WebApp,tg.expand(),mainButton=tg.MainButton,mainButton.text="Отправить результат",mainButton.disable(),mainButton.show(),mainButton.onClick(function(){let e=null,t=null;1===selectedWinner?(e=player1Id,state="completed"):2===selectedWinner?(e=player2Id,state="completed"):(t=selectedWinner,state=selectedWinner);const n={table:tableNumber,players:[player1Id,player2Id],state:state,winner:e,penalties:{player1:document.getElementById("penalty1").checked,player2:document.getElementById("penalty2").checked}};tg.sendData(JSON.stringify(n))}),tg.themeParams&&(document.body.style.backgroundColor=tg.themeParams.bg_color||"#ffffff",document.body.style.color=tg.themeParams.text_color||"#000000")):console.warn("Telegram WebApp не доступен. Приложение работает в режиме предварительного просмотра."),document.querySelectorAll(".player-card").forEach(e=>{e.addEventListener("click",function(){const e=this.getAttribute("data-player"),t=this.getAttribute("data-result");e?selectWinner(parseInt(e)):t&&selectResult(t)})})})</script>